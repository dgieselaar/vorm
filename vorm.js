"use strict";!function(){angular.module("vorm",[])}();!function(){angular.module("vorm").factory("VormEvent",["$document","$window",function(n,t){var e;try{{new t.CustomEvent("vormchange")}e=function(n,e){return new t.CustomEvent(n,{detail:e})}}catch(o){e=function(t,e){var o=n[0].createEvent("CustomEvent");return o.initCustomEvent(t,!0,!0,e),o}}return e}])}();!function(){angular.module("vorm").factory("VormFieldCtrl",["VormEvent","VormValueType",function(e,n){return function(t,a){function r(e,n){var t=e.$viewChangeListeners,a=e.$modelValue;e.$viewChangeListeners=[],e.$modelValue=n,e.$$writeModelToScope(),e.listeners=t,e.$modelValue=a}function u(){a.dispatchEvent(new e("vormchange",{name:t}))}var i={},o=[],c=[],l=n.SINGLE;return i.getName=function(){return t},i.addModel=function(e){o.push(e),e.$viewChangeListeners.push(u)},i.removeModel=function(e){_.pull(o,e),_.pull(e.$viewChangeListeners,u)},i.getModels=function(){return o},i.getValue=function(){var e;switch(l){case n.SINGLE:e=o[0]?o[0].$modelValue:void 0;break;case n.LIST:e=_.pluck(o,"$modelValue");break;case n.NAMED:e={},_.each(o,function(n){e[n.$name]=n.$modelValue})}return e},i.getValueType=function(){return l},i.setValueType=function(e){if(-1===[n.SINGLE,n.LIST,n.NAMED].indexOf(e))throw new Error("Unsupported VormValueType: "+n);l=e},i.setValue=function(e){switch(l){case n.SINGLE:o[0]&&r(o[0],e);break;case n.LIST:_.each(o,function(n,t){r(n,e[t])});break;case n.NAMED:var t=o.concat();_.each(e,function(e,n){var a=_.find(o,{$name:n});a&&r(a,e),_.pull(t,a)}),_.each(t,function(e){r(e,void 0)})}},i.changeListeners=c,"valid invalid dirty pristine touched untouched".split(" ").forEach(function(e){var n=e.substr(0,1).toUpperCase()+e.substr(1),t="is"+n,a="$"+e,r="set"+n,u=-1!==["valid","pristine","untouched"].indexOf(e)?"every":"some";i[t]=function(){return o[u](function(e){return e[a]})},"valid"!==u&&"invalid"!==u&&(i[r]=function(){var e=arguments;o.forEach(function(n){n["$"+r].apply(n,e)})})}),i}}])}();!function(){angular.module("vorm").constant("VormValueType",{SINGLE:"single",LIST:"list",NAMED:"named"})}();var _slicedToArray=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r)){for(var o,n=[],t=r[Symbol.iterator]();!(o=t.next()).done&&(n.push(o.value),!e||n.length!==e););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")};!function(){angular.module("vorm").directive("ngModel",["VormFieldCtrl",function(r){return{require:["ngModel","^?vormField","^?vormForm"],link:function(e,o,n,t){var i=_slicedToArray(t,3),d=i[0],l=i[1],a=i[2];(l||a)&&(l||(l=new r(n.ngModel,o[0]),a.addField(l),e.$on("$destroy",function(){a.removeField(l)})),l.addModel(d),e.$on("$destroy",function(){l.removeModel(d)}))}}}])}();!function(){angular.module("vorm").directive("vormChange",["$parse",function(n){return{link:function(e,r,o){function a(n,r){i(e,{$event:n,$name:r})}var i;i=n(o.vormChange),r.bind("vormchange",a)}}}])}();var _slicedToArray=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r)){for(var o,n=[],t=r[Symbol.iterator]();!(o=t.next()).done&&(n.push(o.value),!e||n.length!==e););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")};!function(){angular.module("vorm").directive("vormField",["VormFieldCtrl",function(r){return{scope:!0,require:["vormField","^?vormForm"],controller:["$scope","$element","$attrs",function(e,o,n){var t=e.$eval(n.vormField)||n.ngModel;angular.extend(this,new r(t,o[0]))}],controllerAs:"vormField",link:function(r,e,o,n){var t=_slicedToArray(n,2),i=t[0],l=t[1];l&&(l.addField(i),r.$on("$destroy",function(){l.removeField(i)}))}}}])}();!function(){angular.module("vorm").directive("vormFieldGenerator",["vormTemplateService",function(e){return{require:["vormFieldGenerator"],template:function(){return e.getDefaultTemplate()},controller:["$scope","$attrs",function(t,r){var n,l=this,a=t.$eval(r.config)||{};if(a=_.extend(a,{name:r.name,type:r.type,label:r.label,template:t.$eval(r.label)}),!a.name||!a.type)throw new Error("Missing one of required arguments: name, type ");return n=e.getModelTemplate(a.type,a.template),l.getInputTemplate=function(){return n},l}],controllerAs:"vormFieldGenerator"}}])}();!function(){angular.module("vorm").directive("vormForm",["$window",function(){return{scope:!0,require:["form"],controller:["$element",function(n){function e(){var n=arguments;_.each(u,function(e){e.apply(t,n)})}var t=this,r=[],u=[],i=[];return t.addField=function(n){r.push(n),n.changeListeners.push(e)},t.removeField=function(n){_.pull(r,n),_.pull(n.changeListeners,e)},t.getFields=function(){return r},t.getValues=function(){var n;return n=_(r).indexBy(function(n){return n.getName()}).mapValues(function(n){return n.getValue()}).value()},t.changeListeners=u,t.submitListeners=i,"valid invalid dirty pristine touched untouched".split(" ").forEach(function(n){var e=n.substr(0,1).toUpperCase()+n.substr(1),u="is"+e,i="set"+e,o="every";t[u]=function(){return r[o](function(n){return n[u]()})},"valid"!==o&&"invalid"!==o&&(t[i]=function(){var n=arguments;r.forEach(function(e){e[i].apply(e,n)})})}),n.bind("submit",function(){_.each(i,function(n){n()})}),t}],controllerAs:"vormForm"}}])}();var _slicedToArray=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r)){for(var t,n=[],o=r[Symbol.iterator]();!(t=o.next()).done&&(n.push(t.value),!e||n.length!==e););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")};!function(){angular.module("vorm").directive("vormInput",[function(){return{require:["^?vormFieldGenerator"],scope:!0,controllerAs:"vormInput",link:function(r,e,t,n,o){var i=_slicedToArray(n,1),a=i[0];if(a)a.getInputTemplate().then(function(t){t(r,function(r){e.replaceWith(r)})})["catch"](function(r){console.log("Error loading input template:",r)});else{if(!o)throw new Error("vormInput needs either a transclude function or vormFieldGenerator.");o(function(r){e.replaceWith(r)})}}}}])}();var _slicedToArray=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r)){for(var t,n=[],i=r[Symbol.iterator]();!(t=i.next()).done&&(n.push(t.value),!e||n.length!==e););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")};!function(){angular.module("vorm").directive("vormSubmit",["$parse",function(r){return{require:["vormForm"],link:function(e,t,n,i){function o(){u(e,{$values:l.getValues()})}var u,a=_slicedToArray(i,1),l=a[0];u=r(n.vormSubmit),t.bind("submit",o)}}}])}();!function(){angular.module("vorm").provider("vormTemplateService",[function(){var n,l={};return n='\n				<div class="vorm-field"\n					ng-class="vormField.getClassObj()"\n					>\n					<div class="vorm-field-label">\n						{{vormFieldTemplate.getLabel()}}\n					</div>\n					\n					<ul class="vorm-input-list">\n						<li class="vorm-input" ng-repeat="model in vormField.getModels()">\n						</li>\n					</ul>\n					\n					<div class="vorm-field-status">\n						\n					</div>\n				</div>\n			',{$get:function(){return l}}}])}();
//# sourceMappingURL=vorm.js.map